<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form">

    <l:Splitter height="100%" width="100%">
        
        <VBox height="100%">
            <layoutData><l:SplitterLayoutData size="400px" minSize="350px"/></layoutData>
            
            <OverflowToolbar design="Solid">
                <Title text="Nhật ký ({= ${dailyLogModel>/ZLOG_WORK}.length || 0})" level="H3"/>
                <ToolbarSpacer/>
                <Button text="Thêm" icon="sap-icon://add" type="Emphasized" press=".onAddLog"/>
            </OverflowToolbar>

            <Table 
                id="idDailyLogList" 
                items="{dailyLogModel>/ZLOG_WORK}" 
                mode="SingleSelectMaster" 
                selectionChange=".onLogItemSelect"
                growing="true"
                sticky="ColumnHeaders">
                <columns>
                    <Column><Text text="Hạng mục"/></Column>
                    <Column hAlign="End" width="90px"><Text text="Ngày"/></Column>
                </columns>
                <items>
                    <ColumnListItem type="Navigation">
                        <cells>
                            <ObjectIdentifier title="{dailyLogModel>wbs_name}"/>
                            <Text text="{path: 'dailyLogModel>log_date', type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'dd/MM/yyyy'}}"/>
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </VBox>

        <VBox id="idDailyLogDetailContainer" height="100%" backgroundDesign="Translucent">
            <OverflowToolbar design="Solid">
                <Title text="Chi tiết nhật ký" level="H3"/>
                <ToolbarSpacer/>
                <Button text="Sửa" icon="sap-icon://edit" press=".onToggleEditMode" 
                        visible="{dailyLogModel>/ui/isSelected}" enabled="{= !${dailyLogModel>/ui/editMode}}"/>
                <Button text="Xóa" icon="sap-icon://delete" type="Reject" press=".onDeleteLog" 
                        visible="{dailyLogModel>/ui/isSelected}" enabled="{= !${dailyLogModel>/ui/editMode}}"/>
            </OverflowToolbar>

            <ScrollContainer height="100%" vertical="true" visible="{dailyLogModel>/ui/isSelected}">
                <f:SimpleForm 
                    editable="true"
                    layout="ResponsiveGridLayout"
                    labelSpanXL="4" labelSpanL="4" labelSpanM="4" labelSpanS="12"
                    adjustLabelSpan="false"
                    emptySpanXL="0" emptySpanL="0" emptySpanM="0" emptySpanS="0"
                    columnsXL="2" columnsL="2" columnsM="2"
                    singleContainerFullSize="false">
                    <f:content>
                        
                        <core:Title text="Thông tin chung" />
                        
                        <Label text="Ngày thực hiện" />
                        <DatePicker value="{path: 'dailyLogModel>log_date', type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'dd/MM/yyyy'}}" editable="false"/>

                        <Label text="Hạng mục (WBS)" />
                        <Input value="{dailyLogModel>wbs_name}" editable="false"/>

                        <Label text="Thời tiết (Sáng)" />
                        <RadioButtonGroup columns="3" selectedIndex="{dailyLogModel>weather_am_idx}" editable="{dailyLogModel>/ui/editMode}">
                            <RadioButton text="Nắng" /> <RadioButton text="Mát mẻ" /> <RadioButton text="Mưa" />
                        </RadioButtonGroup>

                        <Label text="Thời tiết (Chiều)" />
                        <RadioButtonGroup columns="3" selectedIndex="{dailyLogModel>weather_pm_idx}" editable="{dailyLogModel>/ui/editMode}">
                            <RadioButton text="Nắng" /> <RadioButton text="Mát mẻ" /> <RadioButton text="Mưa" />
                        </RadioButtonGroup>

                        <Label text="CBKT" />
                        <Input value="{dailyLogModel>man_cbkt}" type="Number" placeholder="CBKT" editable="{dailyLogModel>/ui/editMode}">
                            <layoutData><l:GridData span="XL2 L2 M2 S4"/></layoutData>
                        </Input>

                        <Label text="CN" />
                        <Input value="{dailyLogModel>man_cn}" type="Number" placeholder="CN" editable="{dailyLogModel>/ui/editMode}">
                            <layoutData><l:GridData span="XL2 L2 M2 S4"/></layoutData>
                        </Input>

                        <core:Title text="Máy móc thiết bị" />
                        
                        <Label text="Máy xúc (chiếc)" />
                        <Input value="{dailyLogModel>eq_mayxuc}" type="Number" editable="{dailyLogModel>/ui/editMode}">
                            <layoutData><l:GridData span="XL2 L2 M2 S4"/></layoutData>
                        </Input>

                        <Label text="Cần cẩu (chiếc)" />
                        <Input value="{dailyLogModel>eq_cancau}" type="Number" editable="{dailyLogModel>/ui/editMode}">
                            <layoutData><l:GridData span="XL2 L2 M2 S4"/></layoutData>
                        </Input>

                        <Label text="Búa đóng cọc (cái)" />
                        <Input value="{dailyLogModel>eq_bua}" type="Number" editable="{dailyLogModel>/ui/editMode}">
                            <layoutData><l:GridData span="XL2 L2 M2 S4"/></layoutData>
                        </Input>

                        <Label text="Máy lu (chiếc)" />
                        <Input value="{dailyLogModel>eq_maylu}" type="Number" editable="{dailyLogModel>/ui/editMode}">
                            <layoutData><l:GridData span="XL2 L2 M2 S4"/></layoutData>
                        </Input>

                        <Label text="Máy cắt uốn (cái)" />
                        <Input value="{dailyLogModel>eq_catuon}" type="Number" editable="{dailyLogModel>/ui/editMode}">
                            <layoutData><l:GridData span="XL2 L2 M2 S4"/></layoutData>
                        </Input>

                        <Label text="Máy hàn (cái)" />
                        <Input value="{dailyLogModel>eq_mayhan}" type="Number" editable="{dailyLogModel>/ui/editMode}">
                            <layoutData><l:GridData span="XL2 L2 M2 S4"/></layoutData>
                        </Input>

                        <Label text="Đầm dùi (cái)" />
                        <Input value="{dailyLogModel>eq_damdui}" type="Number" editable="{dailyLogModel>/ui/editMode}">
                            <layoutData><l:GridData span="XL2 L2 M2 S4"/></layoutData>
                        </Input>

                        <Label text="Ô tô (xe)" />
                        <Input value="{dailyLogModel>eq_oto}" type="Number" editable="{dailyLogModel>/ui/editMode}">
                            <layoutData><l:GridData span="XL2 L2 M2 S4"/></layoutData>
                        </Input>

                        <core:Title text="Chi tiết thực hiện" />
                        
                        <Label text="Mô tả công việc" />
                        <TextArea value="{dailyLogModel>description}" rows="4" editable="{dailyLogModel>/ui/editMode}"/>

                    </f:content>
                </f:SimpleForm>
            </ScrollContainer>

            <OverflowToolbar visible="{dailyLogModel>/ui/editMode}" design="Transparent">
                <ToolbarSpacer/>
                <Button text="Lưu thay đổi" type="Emphasized" icon="sap-icon://save" press=".onSaveEdit"/>
                <Button text="Hủy bỏ" press=".onCancelEdit"/>
            </OverflowToolbar>
        </VBox>
    </l:Splitter>
</core:FragmentDefinition>